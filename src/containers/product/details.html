<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Commodity details</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="stylesheet" href="../../css/mui.min.css"/>
    <link rel="stylesheet" href="../../css/base.css"/>
    <link rel="stylesheet" href="../../css/subpage.css"/>
    <style>
        #productDes img {
            width: 100%;
        }
    </style>
</head>

<body>
<header class="mui-bar mui-bar-nav bakc-fff">
    <span id="back_btn" class="mui-icon mui-icon-arrowleft mui-icon-bars mui-pull-left" onclick="location.replace(document.referrer)"></span>
    <a href="javascript:void(0);" class="mui-icon iconfont icon-gouwuche2 mui-pull-right nmg"></a>
    <h1 class="mui-title"></h1>
</header>
<div id="refreshContainer" class="mui-content mui-scroll-wrapper">
    <div class="mui-scroll">
        <div class="mui-content padding-b50">
            <div data-type="details">
                <!--details-->
            </div>
            <div id="move-togger"></div>
        </div>
    </div>
    <div class="hidden bakc-fff buy-now border-t">
        <button class="mui-pull-right buy-now-button nborder font12">BUY NOW</button>
        <button class="mui-pull-right cart-btn-button nback font12 font-color-h">ADD TO CART</button>
    </div>
    <!-- off-canvas backdrop -->
    <div class="mui-off-canvas-backdrop"></div>
</div>
<script src="../../js/common/api.js"></script>
<script src="../../js/common/jquery.min.js"></script>
<script src="../../js/common/mui.min.js"></script>
<script src="../../js/common/template/template.js"></script>
<script src="../../js/main.js"></script>
<script id="details" type="text/html">
    <div id="slider" class="mui-slider padding-b20 bakc-fff" style="z-index: initial;">
        <div class="mui-slider-group mui-slider-loop">
            <!--额外增加的一个节点(循环轮播：第一个节点是最后一张轮播)-->
            <div class="mui-slider-item mui-slider-item-duplicate">
                <a href="#">
                    <img src="{{showImages[0].bigImage}}">
                </a>
            </div>

            <!-- 循环 -->
            {{each showImages as p i}}
            <div class="mui-slider-item hidden">
                <a href="#">
                    <img src="{{p.bigImage}}">
                </a>
            </div>
            {{/each}}

            <!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
            <div class="mui-slider-item mui-slider-item-duplicate">
                <a href="#">
                    <img src="{{showImages[0].bigImage}}">
                </a>
            </div>
        </div>

        <div class="mui-slider-indicator text-l margin-l10">
            {{each showImages as p i}}
            <div class="mui-indicator"></div>
            {{/each showImages}}
        </div>
        <div class="Attention-sharing">
            <p class="iconfont icon-guanzhu1 mui-pull-left radius50 border bakc-fff text-c font18"></p>
            <p class="iconfont icon-fenxiang mui-pull-left radius50 border bakc-fff text-c font18"></p>
        </div>
    </div>
    {{if superDealBO.status == 1}}
    <div class="timed-spike padding-line44 color-white relative" style="margin-top: -20px;">
        <div class="top-left">
            <h4 class="font-weight font16">Flash Deals</h4>
            <s class="line-through font12">TTD $89.99</s>
        </div>
        <b class="text-c font18">TTD ${{superDealBO.superDealProduct.superDealPrice}}</b>
        <div class="count-down color-white font12 text-c">April 28 began spike</div>
    </div>
    {{else if superDealBO.status == 2}}
    <div class="timed-spike padding-line44 color-white relative" style="margin-top: -20px;">
        <div class="top-left">
            <h4 class="font-weight font16">Flash Deals</h4>
            <s class="line-through font12">TTD $89.99</s>
        </div>
        <b class="text-c font18">TTD $123</b>
        <div class="count-down color-white font12 text-c">April 28 began spike</div>
    </div>
    {{else}}
    {{/if}}
    <div class="bakc-fff padding-line44" style="padding-bottom: 0;">
        <div class="description">
            <h5 class="font-color-3 text-c line18">
                {{name}}
            </h5>
            <b class="color-red font-weight text-c line20 margin-t10 font16">TTD ${{specialPrice}}</b>
            <s class="line-through font-color-9 font12 text-c">TTD ${{highestPrice}}</s>
            <div class="hidden d-activity text-c">
                <em class="timed-spike color-white radius4  text-c margin-r5 font12 line18 text-c">NEW</em>
                <em class="timed-spike color-white radius4  text-c margin-r5 font12 line18 text-c">HOT</em>
                <em class="timed-spike color-white radius4  text-c  font12 line18 text-c">
                    <s class="mui-icon mui-icon-arrowthindown font18 font-weight"></s>{{((highestPrice-bottomPrice)/highestPrice*100).toFixed()}}%
                </em>
            </div>
        </div>
        <ul class="hidden margin-t20 border-t border-be padding-t10 padding-b10">
            <li class="mui-col-xs-4 mui-pull-left text-l relative">
                <div class="hidden">
                    <h4 class="no-font-weight font16 mui-pull-left">5</h4>
                    <div class="excellent-star mui-pull-left score-star">
                        <p class="fourstar"></p>
                    </div>
                </div>
                <p class="font12">Feedback</p>
            </li>
            <li class="mui-col-xs-4 mui-pull-left text-c border-l border-r">
                <h4 class="no-font-weight font16">{{saleNum}}</h4>
                <p class="font12">orders</p>
            </li>
            <li class="mui-col-xs-4 mui-pull-left text-r">
                <h4 class="no-font-weight font16">568</h4>
                <p class="font12">Wish Lost</p>
            </li>
        </ul>
    </div>
    <ul class="attribute-list margin-t10 bakc-fff" style="padding: 0 15px;">
        <li class="mui-table-view">
            <a href="javascript:void(0)" class="font-color-3 hidden">
                <span class="mui-navigate-right font18 mui-pull-right right-4"></span>
                <s class="mui-pull-right font-color-h mar-right">Select</s>
                Color
            </a>
        </li>
    </ul>
    <div class="feedback-main">
        <p class="mui-table-view-cell margin-t10 bakc-fff padding-line44 font-color-3">
            <a href="javascript:void(0)">Feedback(666)<span class="mui-pull-right font-color-9">More</span></a>
        </p>
        <!-- 评论 -->
        <dl class="more-comments bakc-fff hidden relative border-be">
            <dt class="head-portrait mui-pull-left radius50 hidden margin-r10">
                <img src="../../images/Default-Avatar.jpg">
            </dt>
            <dd>
                <ul style="margin-left: 60px;">
                    <li class="hidden">
                        <h4 class="no-font-weight font-color-3 font14 mui-pull-left margin-t5">
                            Feedback(666)</h4>
                        <div class="mui-pull-left mui-pull-right evaluate-stars">
                            <p></p>
                        </div>
                    </li>
                    <li class="hidden margin-t5">
                        <p class="mui-pull-left font12 margin-r10">22 Apr 2017</p>
                        <p class="mui-pull-left font12 margin-r10">Color:PSB</p>
                    </li>
                    <li class="line16 margin-t5 font-color-3">A good set. but the photo looks tighter. in fact,
                        thin jersey. the cool summer weather. minus a star for a long delivery-almost two
                        months. that is good for growth ordered
                    </li>
                    <li class="margin-t10">
                        <ul class="hidden">
                            <li class="mui-pull-left comment-picture radius4" style="height: 88px;">
                                <img src="../../images/img.jpg">
                            </li>
                            <li class="mui-pull-left comment-picture radius4" style="height: 88px;">
                                <img src="../../images/img2.jpg">
                            </li>
                            <li class="mui-pull-left comment-picture radius4" style="height: 88px;">
                                <img src="../../images/img3.jpg">
                            </li>
                            <li class="mui-pull-left comment-picture radius4" style="height: 88px;">
                                <img src="../../images/cat.jpg">
                            </li>
                            <li class="mui-pull-left comment-picture radius4" style="height: 88px;">
                                <img src="../../images/Default-Avatar.jpg">
                            </li>
                        </ul>
                    </li>
                </ul>
            </dd>
        </dl>
        <!-- end -->
        <p class="mui-table-view-cell text-c bakc-fff font-color-3">View All</p>
    </div>
    <div class="margin-t10">
        <p class=" mui-table-view-cell bakc-fff font-color-3">Buyer Protection</p>
        <dl class="mui-table-view-cell bakc-fff hidden ">
            <dt class="head-portrait mui-pull-left hidden buyer-img">
                <img src="../../images/buyer.png"/>
            </dt>
            <dd>
                <ul style="margin-left: 42px;">
                    <li class="line16 font-color-3">
                        <p class="font-color-3">
                            Buyer Protection<br/>
                            Protecting your purchase from click to delivery
                        </p>
                        <br/>
                        <p class="font-color-3">
                            Welcome to RTTMALL buyer Protection<br/>
                            We want you to shop with confidence.<br/>
                            That's why we provide guarantees that ensure you'll receive your item on time and as
                            described.
                        </p>
                    </li>
                </ul>
            </dd>
        </dl>
        <div class="bakc-fff border-be ptb-lr">
            <p class="font-color-3">On time delivery 60 days</p>
            <p>Full refunf if product isn't received in 60 days</p>
        </div>
        <p class="mui-table-view-cell text-c bakc-fff font-color-3">View Details</p>
    </div>
    <div class="mui-table-view-cell text-c bakc-fff margin-t10 ptb-lr">
        <div id="show_details">
            <span class="iconfont icon-shang font18"></span>
            <p class="font-color-3">swipe up view item description</p>
        </div>
        <div id="productDes">
            <!-- details-->
        </div>
    </div>

</script>
<script src="../../js/details/details.js"></script>
<script type="text/javascript" defer>
    mui.init();
    mui('#offCanvasContentScroll').scroll();
    /*五星评价*/
    var progressbar1 = mui('#star');
    mui(progressbar1).progressbar().setProgress(0);
    /*默认开始值*/
    progressbar1.on('tap', 'a', function () {
        mui(progressbar1).progressbar().setProgress(this.getAttribute('data-progress'));
    });
    /**
     * 通过随机数模拟业务进度，真实业务中需根据实际进度修改
     * @param {Object} container
     * @param {Object} progress
     */
    function simulateLoading(container, progress) {
        if (typeof container === 'number') {
            progress = container;
            container = 'body';
        }
        setTimeout(function () {
            progress += Math.random() * 20;
            mui(container).progressbar().setProgress(progress);
            if (progress < 100) {
                simulateLoading(container, progress);
            } else {
                mui(container).progressbar().hide();
            }
        }, Math.random() * 200 + 200);
    }
    mui('body').on('tap', 'a', function () {
        window.top.location.href = this.href;
    });
    var div = document.getElementsByClassName("mui-slider-item");
    for (var i = 0; i < div.length; i++) {
        var d = div[i];
        var width = d.offsetWidth;
        d.style.height = width + "px";
    }
</script>
<script type="text/javascript" defer>
    mui.init({
        pullRefresh : {
            container:"#refreshContainer",//待刷新区域标识，querySelector能定位的css选择器均可，比如：id、.class等
            up:{
                height: 50, //可选.默认50.触发上拉加载拖动距离
                auto: false, //可选,默认false.自动上拉加载一次
                contentrefresh: "Loading...", //可选，正在加载状态时，上拉加载控件上显示的标题内容
                contentnomore: '-_- have nothing !!!', //可选，请求完毕若没有更多数据时显示的提醒内容；
                callback : function() {
                    var self = this; // 这里的this == mui('#refreshContainer').pullRefresh()
                    // 加载更多的内容
                    loadMore(this);
                }
                //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
            }
        }
    });
    //详情
    var list_state = false;
    var loadMore = function(pullRefresh) {
        // 加载更多的内容到列表中
        if (list_state == false){
            // 如果有更多数据，则继续
            pullRefresh.endPullupToRefresh(false);
            $("#productDes").show();
            $("#show_details").hide();
            list_state = true;
        }else{
            // 如果没有更多数据了，则关闭上拉加载
            pullRefresh.endPullupToRefresh(true);
        }
    };
</script>
</body>

</html>
